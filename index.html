<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Massivendurchfall</title>
  <meta name="description" content="Hub page to open sub-sites." />
  <meta name="color-scheme" content="dark light" />
  <style>
    :root{
      --bg:#0b0f16;
      --card:#0f1623;
      --text:#e8edf6;
      --muted:#a9b4c7;
      --line:rgba(255,255,255,.10);
      --shadow:0 18px 70px rgba(0,0,0,.45);
      --radius:22px;
      --focus:rgba(140,170,255,.35);
      --btn:#ffffff;
      --btnText:#0b0f16;
      --btnShadow:0 14px 40px rgba(255,255,255,.10);
    }

    @media (prefers-color-scheme: light){
      :root{
        --bg:#f6f8fc;
        --card:#ffffff;
        --text:#0b0f16;
        --muted:#5a667c;
        --line:rgba(0,0,0,.08);
        --shadow:0 18px 60px rgba(10,15,22,.10);
        --btn:#0b0f16;
        --btnText:#ffffff;
        --btnShadow:0 14px 40px rgba(10,15,22,.15);
      }
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 800px at 15% 10%, rgba(120,140,255,.18), transparent 55%),
                  radial-gradient(900px 700px at 85% 30%, rgba(120,255,215,.14), transparent 55%),
                  radial-gradient(900px 800px at 55% 90%, rgba(255,170,120,.10), transparent 55%),
                  var(--bg);
      color:var(--text);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }

    .shell{
      width: min(720px, 100%);
    }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,0)) , var(--card);
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }

    .top{
      padding:28px 26px 18px;
      display:flex;
      flex-direction:column;
      gap:10px;
    }

    h1{
      margin:0;
      font-size: clamp(26px, 4vw, 34px);
      letter-spacing:-0.02em;
      line-height:1.1;
    }

    p{
      margin:0;
      color:var(--muted);
      line-height:1.5;
      font-size:14.5px;
      max-width: 58ch;
    }

    .form{
      padding:0 26px 26px;
      display:flex;
      flex-direction:column;
      gap:14px;
    }

    .row{
      display:flex;
      gap:12px;
      align-items:stretch;
      flex-wrap:wrap;
    }

    .select{
      flex:1 1 260px;
      min-width: 220px;
      position:relative;
    }

    select{
      width:100%;
      appearance:none;
      border-radius: 16px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.04);
      color: var(--text);
      padding: 14px 44px 14px 14px;
      font-size: 15px;
      outline:none;
      transition: border-color .15s ease, box-shadow .15s ease, transform .15s ease;
    }

    select:focus{
      border-color: rgba(140,170,255,.55);
      box-shadow: 0 0 0 6px var(--focus);
    }

    .chev{
      position:absolute;
      right:14px;
      top:50%;
      transform: translateY(-50%);
      pointer-events:none;
      opacity:.75;
      font-size: 12px;
      letter-spacing:.08em;
      color: var(--muted);
    }

    button{
      flex: 0 0 auto;
      border:0;
      border-radius: 16px;
      padding: 14px 18px;
      font-size: 15px;
      font-weight: 650;
      background: var(--btn);
      color: var(--btnText);
      box-shadow: var(--btnShadow);
      cursor:pointer;
      transition: transform .15s ease, box-shadow .15s ease, opacity .15s ease;
    }

    button:hover{ transform: translateY(-1px); }
    button:active{ transform: translateY(0px) scale(.99); opacity:.95; }
    button:focus{ outline:none; box-shadow: var(--btnShadow), 0 0 0 6px var(--focus); }

    .meta{
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:space-between;
      flex-wrap:wrap;
      border-top:1px solid var(--line);
      padding: 14px 26px 16px;
      color: var(--muted);
      font-size: 13px;
    }

    .links{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:flex-end;
    }

    .links a{
      color: var(--muted);
      text-decoration:none;
      border-bottom: 1px solid transparent;
      transition: color .15s ease, border-color .15s ease;
      font-size: 13px;
    }

    .links a:hover{
      color: var(--text);
      border-color: rgba(140,170,255,.45);
    }

    .dot{
      opacity:.55;
      user-select:none;
    }

    .toast{
      position: fixed;
      left: 50%;
      bottom: 18px;
      transform: translateX(-50%);
      background: rgba(0,0,0,.55);
      color: #fff;
      padding: 10px 12px;
      border-radius: 14px;
      font-size: 13px;
      border: 1px solid rgba(255,255,255,.12);
      box-shadow: 0 12px 40px rgba(0,0,0,.35);
      opacity:0;
      pointer-events:none;
      transition: opacity .18s ease, transform .18s ease;
      backdrop-filter: blur(10px);
    }

    .toast.show{
      opacity:1;
      transform: translateX(-50%) translateY(-2px);
    }

    @media (max-width: 520px){
      .top{ padding:22px 18px 14px; }
      .form{ padding:0 18px 18px; }
      .meta{ padding:12px 18px 14px; }
      button{ width:100%; }
      .row{ gap:10px; }
    }
  </style>
</head>
<body>
  <main class="shell">
    <section class="card" role="region" aria-label="Hub">
      <div class="top">
        <h1>Massivendurchfall</h1>
        <p>Select a site and open it. Your last choice is remembered.</p>
      </div>

      <div class="form">
        <div class="row">
          <div class="select">
            <select id="siteSelect" aria-label="Select site">
              <option value="/chess">Chess</option>
              <option value="/coin">Coin</option>
              <option value="/eft">EFT</option>
              <option value="/pvz">PVZ</option>
              <option value="/shooter">Shooter</option>
            </select>
            <div class="chev">▼</div>
          </div>
          <button id="openBtn" type="button">Open</button>
        </div>
      </div>

      <div class="meta">
        <div id="hint">Tip: use <strong>?to=chess</strong> to auto-open.</div>
        <div class="links" aria-label="Quick links">
          <a href="./chess/">chess</a><span class="dot">•</span>
          <a href="./coin/">coin</a><span class="dot">•</span>
          <a href="./eft/">eft</a><span class="dot">•</span>
          <a href="./pvz/">pvz</a><span class="dot">•</span>
          <a href="./shooter/">shooter</a>
        </div>
      </div>
    </section>
  </main>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <script>
    const siteSelect = document.getElementById("siteSelect");
    const openBtn = document.getElementById("openBtn");
    const toast = document.getElementById("toast");

    const sites = {
      chess: "/chess",
      coin: "/coin",
      eft: "/eft",
      pvz: "/pvz",
      shooter: "/shooter"
    };

    function showToast(text) {
      toast.textContent = text;
      toast.classList.add("show");
      window.clearTimeout(showToast._t);
      showToast._t = window.setTimeout(() => toast.classList.remove("show"), 1400);
    }

    function normalizeToPath(value) {
      if (!value) return null;
      const v = String(value).trim().toLowerCase();
      if (sites[v]) return sites[v];
      if (v.startsWith("/")) return v.replace(/\/+$/, "");
      return "/" + v.replace(/\/+$/, "");
    }

    function openSelected() {
      const path = siteSelect.value;
      localStorage.setItem("hub:lastPath", path);
      showToast("Opening…");
      window.location.href = "." + path + "/";
    }

    const saved = localStorage.getItem("hub:lastPath");
    if (saved) {
      const option = Array.from(siteSelect.options).find(o => o.value === saved);
      if (option) siteSelect.value = saved;
    }

    openBtn.addEventListener("click", openSelected);
    siteSelect.addEventListener("change", () => localStorage.setItem("hub:lastPath", siteSelect.value));

    const params = new URLSearchParams(window.location.search);
    const to = params.get("to");
    if (to) {
      const path = normalizeToPath(to);
      const matched = Array.from(siteSelect.options).find(o => o.value === path);
      if (matched) siteSelect.value = path;
      localStorage.setItem("hub:lastPath", path || siteSelect.value);
      window.location.replace("." + (path || siteSelect.value) + "/");
    }
  </script>
</body>
</html>
